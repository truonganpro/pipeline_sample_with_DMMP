"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1202],{70468:function(e,n,t){t.d(n,{_:function(){return f}});var s=t(52322),r=t(55010),o=t(60603),i=t(38491),c=t(29467),l=t(2784),a=t(25212),d=t(34147),u=t(39013),p=t(92506),h=t(99417),x=t(20958),m=t(54724),j=t(94062);let g=e=>{let{openWithIntent:n,onClose:t,onComplete:r,schedules:o}=e,g=o.length,[y,f]=(0,m.s)();(0,l.useEffect)(()=>{"not-open"===n&&f({type:"reset"})},[n,f]);let[b]=(0,x.Db)(h.Wz),[w]=(0,x.Db)(h.d0),S=async e=>{let{repoAddress:n,scheduleName:t}=e,s={scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}},{data:r}=await b({variables:s});switch(null==r?void 0:r.startSchedule.__typename){case"ScheduleStateResult":f({type:"update-success"});return;case"UnauthorizedError":case"PythonError":f({type:"update-error",name:t,error:r.startSchedule.message})}},v=async e=>{let{scheduleName:n,scheduleState:t}=e,s={id:t.id},{data:r}=await w({variables:s});switch(null==r?void 0:r.stopRunningSchedule.__typename){case"ScheduleStateResult":f({type:"update-success"});return;case"UnauthorizedError":case"PythonError":f({type:"update-error",name:n,error:r.stopRunningSchedule.message})}},C=async()=>{if("not-open"!==n){for(let e of(f({type:"start"}),o))"start"===n?await S(e):await v(e);f({type:"complete"}),r()}},E="updating"!==y.step;return(0,s.jsxs)(p.Vq,{isOpen:"not-open"!==n,title:"start"===n?"Start schedules":"Stop schedules",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:t,children:[(0,s.jsx)(p.a7,{children:(0,s.jsxs)(d.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===n)return null;switch(y.step){case"initial":if("stop"===n)return(0,s.jsx)("div",{children:"".concat(g," ").concat(1===g?"schedule":"schedules"," will be stopped. Do you want to continue?")});return(0,s.jsx)("div",{children:"".concat(g," ").concat(1===g?"schedule":"schedules"," will be started. Do you want to continue?")});case"updating":case"completed":let e=g>0?y.completion.completed/g:1;return(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,s.jsx)(a.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===y.step?(0,s.jsx)(j.c,{message:"Schedules are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===n||"initial"===y.step)return null;if("updating"===y.step)return(0,s.jsx)("div",{children:"Please do not close the window or navigate away while schedules are being updated."});let e=y.completion.errors,t=Object.keys(e).length,r=y.completion.completed-t;return(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[r?(0,s.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(c.JO,{name:"check_circle",color:u.fA()}),(0,s.jsx)("div",{children:"start"===n?"Successfully started ".concat(1===r?"1 schedule":"".concat(r," schedules"),"."):"Successfully stopped ".concat(1===r?"1 schedule":"".concat(r," schedules"),".")})]}):null,t?(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,s.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(c.JO,{name:"warning",color:u.qr()}),(0,s.jsx)("div",{children:"start"===n?"Could not start ".concat(1===t?"1 schedule":"".concat(t," schedules"),"."):"Could not stop ".concat(1===t?"1 schedule":"".concat(t," schedules"),".")})]}),(0,s.jsx)("ul",{children:Object.keys(e).map(n=>(0,s.jsx)("li",{children:(0,s.jsxs)(d.Z,{direction:"row",spacing:8,children:[(0,s.jsxs)("strong",{children:[n,":"]}),e[n]?(0,s.jsx)("div",{children:e[n]}):null]})},n))})]}):null]})})()]})}),(0,s.jsx)(p.cN,{children:(()=>{if("not-open"===n)return null;switch(y.step){case"initial":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,s.jsx)(i.zx,{intent:"primary",onClick:C,children:"start"===n?"Start ".concat(1===g?"1 schedule":"".concat(g," schedules")):"Stop ".concat(1===g?"1 schedule":"".concat(g," schedules"))})]});case"updating":return(0,s.jsx)(i.zx,{intent:"primary",disabled:!0,children:"start"===n?"Starting ".concat(1===g?"1 schedule":"".concat(g," schedules")):"Stopping ".concat(1===g?"1 schedule":"".concat(g," schedules"))});case"completed":return(0,s.jsx)(i.zx,{intent:"primary",onClick:t,children:"Done"})}})()})]})};var y=t(69557);let f=e=>{let{schedules:n,onDone:t}=e,a=n.length,[d,u]=(0,l.useState)("not-open"),{anyOff:p,anyOn:h}=(0,l.useMemo)(()=>(0,y.H)(n.map(e=>{let{scheduleState:n}=e;return n})),[n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.J,{content:(0,s.jsxs)(o.v2,{children:[(0,s.jsx)(o.sN,{text:"Start ".concat(1===a?"1 schedule":"".concat(a," schedules")),disabled:!p,"aria-disabled":!p,icon:"toggle_on",onClick:()=>{u("start")}}),(0,s.jsx)(o.sN,{text:"Stop ".concat(1===a?"1 schedule":"".concat(a," schedules")),disabled:!h,"aria-disabled":!h,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,s.jsx)(i.zx,{disabled:!a,intent:"primary",rightIcon:(0,s.jsx)(c.JO,{name:"expand_more"}),children:"Actions"})}),(0,s.jsx)(g,{openWithIntent:d,schedules:n,onClose:()=>u("not-open"),onComplete:()=>{t()}})]})}},74050:function(e,n,t){t.d(n,{K:function(){return i}});var s=t(52322),r=t(14934),o=t(16629);t(2784);let i=e=>{let n,{daemonHealth:t,...i}=e;if(t){let e=t.allDaemonStatuses.filter(e=>"SCHEDULER"===e.daemonType);if(e.length>0){let t=e[0];n=t.required&&t.healthy}}return!1===n?(0,s.jsx)(r.x,{...i,children:(0,s.jsx)(o.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,s.jsxs)("div",{children:["See the"," ",(0,s.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}},87209:function(e,n,t){t.d(n,{g:function(){return r}});var s=t(22563);let r=(e,n)=>"".concat((0,s.Uz)(e),"-").concat(n)},64265:function(e,n,t){t.d(n,{b:function(){return f}});var s=t(52322),r=t(55010),o=t(60603),i=t(38491),c=t(29467),l=t(2784),a=t(25212),d=t(34147),u=t(39013),p=t(92506),h=t(89398),x=t(20958),m=t(54724),j=t(94062);let g=e=>{let{openWithIntent:n,onClose:t,onComplete:r,sensors:o}=e,g=o.length,[y,f]=(0,m.s)();(0,l.useEffect)(()=>{"not-open"===n&&f({type:"reset"})},[n,f]);let[b]=(0,x.Db)(h.VE),[w]=(0,x.Db)(h.Xu),S=async e=>{let{repoAddress:n,sensorName:t}=e,s={sensorSelector:{repositoryLocationName:n.location,repositoryName:n.name,sensorName:t}},{data:r}=await b({variables:s});switch(null==r?void 0:r.startSensor.__typename){case"Sensor":f({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":f({type:"update-error",name:t,error:r.startSensor.message})}},v=async e=>{let{sensorName:n,sensorState:t}=e,s={id:t.id},{data:r}=await w({variables:s});switch(null==r?void 0:r.stopSensor.__typename){case"StopSensorMutationResult":f({type:"update-success"});return;case"UnauthorizedError":case"PythonError":f({type:"update-error",name:n,error:r.stopSensor.message})}},C=async()=>{if("not-open"!==n){for(let e of(f({type:"start"}),o))"start"===n?await S(e):await v(e);f({type:"complete"}),r()}},E="updating"!==y.step;return(0,s.jsxs)(p.Vq,{isOpen:"not-open"!==n,title:"start"===n?"Start sensors":"Stop sensors",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:t,children:[(0,s.jsx)(p.a7,{children:(0,s.jsxs)(d.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===n)return null;switch(y.step){case"initial":if("stop"===n)return(0,s.jsx)("div",{children:"".concat(g," ").concat(1===g?"sensor":"sensors"," will be stopped. Do you want to continue?")});return(0,s.jsx)("div",{children:"".concat(g," ").concat(1===g?"sensor":"sensors"," will be started. Do you want to continue?")});case"updating":case"completed":let e=g>0?y.completion.completed/g:1;return(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,s.jsx)(a.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===y.step?(0,s.jsx)(j.c,{message:"Sensors are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===n||"initial"===y.step)return null;if("updating"===y.step)return(0,s.jsx)("div",{children:"Please do not close the window or navigate away while sensors are being updated."});let e=y.completion.errors,t=Object.keys(e).length,r=y.completion.completed-t;return(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[r?(0,s.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(c.JO,{name:"check_circle",color:u.fA()}),(0,s.jsx)("div",{children:"start"===n?"Successfully started ".concat(1===r?"1 sensor":"".concat(r," sensors"),"."):"Successfully stopped ".concat(1===r?"1 sensor":"".concat(r," sensors"),".")})]}):null,t?(0,s.jsxs)(d.Z,{direction:"column",spacing:8,children:[(0,s.jsxs)(d.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(c.JO,{name:"warning",color:u.qr()}),(0,s.jsx)("div",{children:"start"===n?"Could not start ".concat(1===t?"1 sensor":"".concat(t," sensors"),":"):"Could not stop ".concat(1===t?"1 sensor":"".concat(t," sensors"),":")})]}),(0,s.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(n=>(0,s.jsx)("li",{children:(0,s.jsxs)(d.Z,{direction:"row",spacing:8,children:[(0,s.jsxs)("strong",{children:[n,":"]}),e[n]?(0,s.jsx)("div",{children:e[n]}):null]})},n))})]}):null]})})()]})}),(0,s.jsx)(p.cN,{children:(()=>{if("not-open"===n)return null;switch(y.step){case"initial":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,s.jsx)(i.zx,{intent:"primary",onClick:C,children:"start"===n?"Start ".concat(1===g?"1 sensor":"".concat(g," sensors")):"Stop ".concat(1===g?"1 sensor":"".concat(g," sensors"))})]});case"updating":return(0,s.jsx)(i.zx,{intent:"primary",disabled:!0,children:"start"===n?"Starting ".concat(1===g?"1 sensor":"".concat(g," sensors")):"Stopping ".concat(1===g?"1 sensor":"".concat(g," sensors"))});case"completed":return(0,s.jsx)(i.zx,{intent:"primary",onClick:t,children:"Done"})}})()})]})};var y=t(69557);let f=e=>{let{sensors:n,onDone:t}=e,a=n.length,[d,u]=(0,l.useState)("not-open"),{anyOff:p,anyOn:h}=(0,l.useMemo)(()=>(0,y.H)(n.map(e=>{let{sensorState:n}=e;return n})),[n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.J,{content:(0,s.jsxs)(o.v2,{children:[(0,s.jsx)(o.sN,{text:"Start ".concat(1===a?"1 sensor":"".concat(a," sensors")),disabled:!p,"aria-disabled":!p,icon:"toggle_on",onClick:()=>{u("start")}}),(0,s.jsx)(o.sN,{text:"Stop ".concat(1===a?"1 sensor":"".concat(a," sensors")),disabled:!h,"aria-disabled":!h,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,s.jsx)(i.zx,{disabled:!a,intent:"primary",rightIcon:(0,s.jsx)(c.JO,{name:"expand_more"}),children:"Actions"})}),(0,s.jsx)(g,{openWithIntent:d,sensors:n,onClose:()=>u("not-open"),onComplete:()=>{t()}})]})}},73658:function(e,n,t){t.d(n,{W:function(){return a}});var s=t(52322),r=t(2784);let o=e=>{let[n,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let n=setTimeout(()=>t(!0),e);return()=>clearTimeout(n)},[e]),n};var i=t(14934),c=t(35002),l=t(79106);let a=e=>{let{tooltipContent:n}=e;return o(2e3)?(0,s.jsx)(i.x,{margin:{top:1},children:(0,s.jsx)(c.u,{placement:"top",canShow:!!n,content:n||"",children:(0,s.jsx)(l.$,{purpose:"body-text"})})}):null}},63485:function(e,n,t){t.d(n,{I:function(){return F},b:function(){return U}});var s=t(73235),r=t(52322),o=t(53664),i=t(14934),c=t(2784),l=t(47933),a=t(35505),d=t(83738),u=t(92199),p=t(10539),h=t(20958),x=t(16336),m=t(60603),j=t(79106),g=t(55010),y=t(35002),f=t(38491),b=t(29467),w=t(36803),S=t(32177),v=t(51701),C=t(88257),E=t(83846),k=t(42519),N=t(43);function _(){let e=(0,s._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        executionPlan {\n          artifactsPersisted\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}let J=e=>{let{job:n,isAssetJob:t,repoAddress:s}=e,o=n.runs.length?n.runs[0]:null,i={pipelineName:n.name,repositoryName:s.name,repositoryLocationName:s.location},l=(0,S.DO)(n.name),a=(0,k.D)(),{permissions:{canLaunchPipelineReexecution:d,canLaunchPipelineExecution:u},disabledReasons:x}=(0,w.xz)(s.location),[v,_]=(0,h.td)(O),{data:J}=_,R=(0,c.useCallback)(()=>{(null==o?void 0:o.id)&&v({variables:{runId:o.id}})},[o,v]),P=(null==J?void 0:J.pipelineRunOrError.__typename)==="Run"?null==J?void 0:J.pipelineRunOrError:null,q="loading"===t?(0,r.jsx)(m.sN,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,r.jsx)(m.sN,{icon:l.loading?(0,r.jsx)(j.$,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!u,onClick:e=>l.onClick(i,e)}):(0,r.jsx)(N.U,{icon:"execute",text:"Launch new run",disabled:!u,to:(0,p.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),I=(0,r.jsx)(m.sN,{icon:"replay",text:"Re-execute latest run",onClick:()=>P?a(P,C.hmq.ALL_STEPS):void 0,disabled:!d||!P||!(0,E.EP)(P)}),z=(0,r.jsx)(m.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:()=>P?a(P,C.hmq.FROM_FAILURE):void 0,disabled:!d||!P||!(0,E.VM)(P)});return(0,r.jsxs)(r.Fragment,{children:[l.launchpadElement,(0,r.jsx)(g.J,{onOpened:()=>R(),content:(0,r.jsxs)(m.v2,{children:[(0,r.jsx)(N.U,{to:(0,p.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,r.jsx)(N.U,{to:(0,p.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),u?q:(0,r.jsx)(y.u,{content:x.canLaunchPipelineExecution,display:"block",children:q}),d?I:(0,r.jsx)(y.u,{content:x.canLaunchPipelineReexecution,display:"block",children:I}),d?z:(0,r.jsx)(y.u,{content:x.canLaunchPipelineReexecution,display:"block",children:z})]}),position:"bottom-left",children:(0,r.jsx)(f.zx,{icon:(0,r.jsx)(b.JO,{name:"expand_more"})})})]})},O=(0,h.Ps)(_(),v.$);var R=t(60648),P=t(74283),q=t(84046),I=t(33182),z=t(4219),L=t(60918),Z=t(17008);function D(){let e=(0,s._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return D=function(){return e},e}let T="1.5fr 1fr 180px 96px 80px",U=e=>{let{name:n,isJob:t,repoAddress:s,start:a,height:m}=e,[j,g]=(0,h.td)(M,{variables:{selector:(0,u._T)(s,n)}});(0,d.v5)(j),(0,x.C4)(g,x.dT);let{data:y}=g,f=(null==y?void 0:y.pipelineOrError.__typename)==="Pipeline"?null==y?void 0:y.pipelineOrError:void 0,{schedules:b,sensors:w}=(0,c.useMemo)(()=>{if(f){let{schedules:e,sensors:n}=f;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[f]),S=(0,c.useMemo)(()=>{if(f){let{runs:e}=f;if(e.length)return[...e]}return[]},[f]);return(0,r.jsx)(Z.X2,{$height:m,$start:a,children:(0,r.jsxs)(A,{border:"bottom",children:[(0,r.jsxs)(Z.E5,{children:[(0,r.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,r.jsx)(l.rU,{to:(0,p.$U)(s,"/jobs/".concat(n)),children:(0,r.jsx)(o.g,{text:n})})}),(0,r.jsx)(d.HB,{children:(null==f?void 0:f.description)||""})]}),(0,r.jsx)(Z.E5,{children:b.length||w.length?(0,r.jsx)(i.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,r.jsx)($,{children:(0,r.jsx)(P.I,{schedules:b,sensors:w,repoAddress:s})})}):(0,r.jsx)(d.mq,{queryResult:g})}),(0,r.jsx)(Z.E5,{children:S[0]?(0,r.jsx)(R.Z,{run:S[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,r.jsx)(d.mq,{queryResult:g})}),(0,r.jsx)(Z.E5,{children:S.length?(0,r.jsx)(i.x,{padding:{top:4},children:(0,r.jsx)(q.JH,{jobName:n,runs:[...S].reverse(),fade:!0})}):(0,r.jsx)(d.mq,{queryResult:g})}),(0,r.jsx)(Z.E5,{children:(0,r.jsx)(i.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,r.jsx)(J,{job:{name:n,isJob:t,runs:S},isAssetJob:f?f.isAssetJob:"loading",repoAddress:s})})})]})})},F=()=>(0,r.jsxs)(Z.VJ,{templateColumns:T,sticky:!0,children:[(0,r.jsx)(Z.qN,{children:"Name"}),(0,r.jsx)(Z.qN,{children:"Schedules/sensors"}),(0,r.jsx)(Z.qN,{children:"Latest run"}),(0,r.jsx)(Z.qN,{children:"Run history"}),(0,r.jsx)(Z.qN,{})]}),A=(0,a.ZP)(i.x).withConfig({componentId:"sc-b0d21794-0"})(["display:grid;grid-template-columns:",";height:100%;"],T),$=a.ZP.div.withConfig({componentId:"sc-b0d21794-1"})(["width:100%;> .bp4-popover2-target{width:100%;}"]),M=(0,h.Ps)(D(),I.$X,z.J,L.U)}}]);
//# sourceMappingURL=1202.c30b3fb0e1409d35.js.map