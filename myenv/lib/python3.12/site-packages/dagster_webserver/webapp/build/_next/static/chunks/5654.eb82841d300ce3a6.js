"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5654],{63065:function(e,t,r){r.d(t,{e:function(){return R}});var n=r(73235),s=r(52322),i=r(14934),o=r(79106),l=r(39013),a=r(37483),d=r(74159),c=r(45774),u=r(2784),h=r(20958),x=r(78491),p=r(16336),g=r(44900),m=r(4378),j=r(43250),f=r(35002),v=r(43212),y=r(88510),w=r(22921),b=r(17008),C=r(98956),k=r(50646),E=r(63485),S=r(83738),A=r(22563);let T=e=>{let{repos:t}=e,r=(0,u.useRef)(null),n=(0,u.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,A.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:l}=(0,k.N)(w.y,n),a=(0,u.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,jobs:n}=t;e.push({type:"header",repoAddress:r,jobCount:n.length});let s=(0,A.Uz)(r);i.includes(s)&&n.forEach(t=>{let{isJob:n,name:s}=t;e.push({type:"job",repoAddress:r,isJob:n,name:s})})}),e},[t,i]),d=(0,C.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),c=(0,y.MG)({count:a.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=a[e];return(null==t?void 0:t.type)==="header"?b.lo:64},overscan:10}),h=c.getTotalSize(),x=c.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(b.W2,{ref:r,children:[(0,s.jsx)(E.I,{}),(0,s.jsx)(b.Nh,{$totalHeight:h,children:x.map(e=>{let{index:t,key:r,size:n,start:c}=e,u=a[t];return"header"===u.type?(0,s.jsx)(S.vG,{repoAddress:u.repoAddress,height:n,start:c,onToggle:o,onToggleAll:l,expanded:i.includes((0,A.Uz)(u.repoAddress)),showLocation:d.has(u.repoAddress.name),rightElement:(0,s.jsx)(f.u,{content:1===u.jobCount?"1 job":"".concat(u.jobCount," jobs"),placement:"top",children:(0,s.jsx)(v.V,{children:u.jobCount})})},r):(0,s.jsx)(E.b,{name:u.name,isJob:u.isJob,repoAddress:u.repoAddress,height:n,start:c},r)})})]})})};var L=r(907),O=r(49455),N=r(34219),I=r(73658),M=r(8355),z=r(65822);function _(){let e=(0,n._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _=function(){return e},e}let R=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:n}=(0,u.useContext)(M.C5),[x,g]=(0,m.q)({queryKey:"search",defaults:{search:""}}),f=e.length,v=(0,h.aM)(F,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:y,loading:w}=v,b=(0,p.C4)(v,p.dT),C=(0,u.useMemo)(()=>{let e=Object.values(n).filter(e=>"WorkspaceLocationEntry"===e.__typename),r=null==y?void 0:y.workspaceOrError,s=(null==r?void 0:r.__typename)==="Workspace"?r.locationEntries:e,i=(0,O.S)(t);return P(s).filter(e=>{let{repoAddress:t}=e;return i.has((0,A.Uz)(t))})},[n,y,t]),k=!y&&r;(0,N.j$)("OverviewJobs",!k);let E=x.trim().toLocaleLowerCase(),S=E.length>0,L=(0,u.useMemo)(()=>{let e=E.toLocaleLowerCase();return C.map(t=>{let{repoAddress:r,jobs:n}=t;return{repoAddress:r,jobs:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{jobs:t}=e;return t.length>0})},[C,E]),z=w&&!y;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.x,{padding:{horizontal:24,vertical:12},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,s.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[f>1?(0,s.jsx)(j.C,{}):null,(0,s.jsx)(d.oi,{icon:"search",value:x,rightElement:z?(0,s.jsx)(I.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:e=>g(e.target.value),placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,s.jsx)(p.xi,{refreshState:b})]}),k&&!f?(0,s.jsx)(i.x,{padding:64,children:(0,s.jsx)(c.f,{label:"Loading jobs…"})}):(()=>{if(k)return(0,s.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(o.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:l.$()},children:"Loading jobs…"})]})});let r=e.length>t.length;return L.length?(0,s.jsx)(T,{repos:L}):S?(0,s.jsx)(i.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No matching jobs",description:r?(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:x})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:x})," were found in your definitions"]})})}):(0,s.jsx)(i.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No jobs",description:r?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})})()]})},P=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,pipelines:s}=t,i=(0,z.kQ)(n,e.name),o=s.filter(e=>{let{name:t}=e;return!(0,g.pv)(t)}).map(e=>({isJob:e.isJob,name:e.name}));o.length>0&&r.push({repoAddress:i,jobs:o})}return(0,L.S)(r)},F=(0,h.Ps)(_(),x.B)},45654:function(e,t,r){r.r(t),r.d(t,{OverviewRoot:function(){return tF},default:function(){return t$}});var n=r(52322),s=r(7267),i=r(38491),o=r(14934),l=r(2784),a=r(79106),d=r(74159),c=r(16629),u=r(60129),h=r(29467),x=r(43212),p=r(39013),g=r(46100),m=r(60603),j=r(35292),f=r(88510),v=r(47933),y=r(35505),w=r(23399),b=r(16336),C=r(69737),k=r(99048),E=r(98705),S=r(44900),A=r(46318),T=r(79342),L=r(18436),O=r(75442),N=r(20171),I=r(4378),M=r(79059),z=r(17008),_=r(65822),R=r(10539);let P=e=>{let{Header:t,TabButton:r}=e;(0,C.Px)(),(0,N.j)("Overview | Assets");let{assets:s,query:i,error:u,loading:h}=(0,L.Zg)(),x=(0,b.bT)({refresh:i,intervalMs:b.dT,leading:!0}),p=l.useMemo(()=>s?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let r=e.definition.groupName,n=e.definition.repository.name,s="".concat(r,"||").concat(n),i=t[s]||{groupName:r,repositoryName:n,assets:[]};i.assets.push(e),t[s]=i}),Object.values(t)}(s):[],[s]),[g,m]=(0,I.q)({queryKey:"q",decode:e=>e.searchQuery?JSON.parse(e.searchQuery):"",encode:e=>({searchQuery:e?JSON.stringify(e):void 0})}),j=l.useMemo(()=>""===g?p:p.filter(e=>(e.groupName||U).toLowerCase().includes(g.toLowerCase())||e.repositoryName.toLowerCase().includes(g.toLowerCase())),[p,g]),y=l.useMemo(()=>{var e;return null!==(e=j.flatMap(e=>e.assets.map(e=>e.key)))&&void 0!==e?e:[]},[j]);(0,k.NY)(y,"OverviewAssetsRoot");let E=l.useRef(null),S=(0,f.MG)({count:j.length,getScrollElement:()=>E.current,estimateSize:()=>82,overscan:5}),A=S.getTotalSize(),T=S.getVirtualItems();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,n.jsx)(t,{refreshState:x}),(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,n.jsx)(r,{selected:"assets"}),(0,n.jsx)(d.oi,{value:g,onChange:e=>{m(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,n.jsx)(o.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,n.jsx)(c.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,n.jsxs)(n.Fragment,{children:["Use the ",(0,n.jsx)(v.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),h?(0,n.jsx)(o.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(a.$,{purpose:"page"})}):u?(0,n.jsx)(o.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(w.T9,{error:u})}):(0,n.jsx)(o.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,n.jsxs)(z.W2,{ref:E,children:[(0,n.jsx)($,{}),(0,n.jsx)(z.Nh,{$totalHeight:A,children:T.map(e=>{let{index:t,key:r,size:s,start:i}=e,o=j[t];return(0,n.jsx)(q,{start:i,height:s,group:o},r)})})]})})]})},F="5fr 1fr 1fr 1fr 1fr",$=()=>(0,n.jsxs)(z.VJ,{templateColumns:F,sticky:!0,children:[(0,n.jsx)(z.qN,{children:"Group name"}),(0,n.jsx)(z.qN,{children:"Missing"}),(0,n.jsx)(z.qN,{children:"Failed/Overdue"}),(0,n.jsx)(z.qN,{children:"In progress"}),(0,n.jsx)(z.qN,{children:"Materialized"})]}),U="Ungrouped Assets";function q(e){var t,r;let{height:s,start:i,group:d}=e,c=l.useMemo(()=>d.assets.map(e=>({path:e.key.path})),[d.assets]),{liveDataByNode:g}=(0,k.NY)(c),m=l.useMemo(()=>(0,A.s)(d.assets,g),[g,d.assets]),j=null===(r=d.assets.find(e=>{var t;return null===(t=e.definition)||void 0===t?void 0:t.repository}))||void 0===r?void 0:null===(t=r.definition)||void 0===t?void 0:t.repository,f=(0,_.kQ)((null==j?void 0:j.name)||"",(null==j?void 0:j.location.name)||""),{containerProps:y,viewport:w}=(0,u.S)(),b=c.length!==Object.keys(g).length,C=b?"":"0";return(0,n.jsx)(z.X2,{$height:s,$start:i,children:(0,n.jsxs)(B,{border:"bottom",children:[(0,n.jsx)(Q,{children:(0,n.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,n.jsxs)(o.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,n.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,n.jsx)(h.JO,{name:"asset_group"}),d.groupName?(0,n.jsx)(v.rU,{style:{fontWeight:700},to:(0,R.$U)(f,"/asset-groups/".concat(d.groupName)),children:d.groupName}):U]}),(0,n.jsx)("div",{...y,children:(0,n.jsx)(W,{maxWidth:w.width,children:(0,n.jsx)(M.b,{repoAddress:f,showRefresh:!1})})})]}),(0,n.jsx)(o.x,{flex:{direction:"column",justifyContent:"center"},children:b?(0,n.jsx)(a.$,{purpose:"body-text"}):null})]})}),(0,n.jsx)(Q,{children:m.missing.length?(0,n.jsx)(J,{assets:m.missing,getCount:e=>{let{status:t}=e;return t.case===E.KB.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,n.jsx)(x.V,{intent:"none",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(p.im()),borderRadius:"50%"}}),m.missing.length]})})}):C}),(0,n.jsx)(Q,{children:m.failed.length?(0,n.jsx)(J,{assets:m.failed,getCount:e=>{let{status:t}=e;return t.case===E.KB.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,n.jsx)(x.V,{intent:"danger",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),m.failed.length]})})}):C}),(0,n.jsx)(Q,{children:m.inprogress.length?(0,n.jsx)(J,{assets:m.inprogress,getCount:e=>{let{status:t}=e;return t.case===E.KB.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,n.jsx)(x.V,{intent:"primary",icon:"spinner",children:m.inprogress.length})}):C}),(0,n.jsx)(Q,{children:m.successful.length?(0,n.jsx)(J,{assets:m.successful,getCount:e=>{let{status:t}=e;return t.case===E.KB.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,n.jsx)(x.V,{intent:"success",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{backgroundColor:p.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),m.successful.length]})})}):C})]})})}let B=(0,y.ZP)(o.x).withConfig({componentId:"sc-9ca8ef04-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],F),Q=e=>{let{children:t}=e;return(0,n.jsx)(z.E5,{style:{color:p.Ep()},children:(0,n.jsx)(o.x,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},W=y.ZP.div.withConfig({componentId:"sc-9ca8ef04-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],p.$(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function J(e){let{assets:t,children:r,getCount:s,adjective:i}=e;return(0,n.jsx)(V,{children:(0,n.jsx)(g.P,{items:t,itemPredicate:(e,t)=>(0,S.ll)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=s(e);return(0,n.jsx)(D,{to:(0,O.p)(e.asset.key),target:"_blank",children:(0,n.jsx)(m.sN,{text:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,n.jsx)("div",{style:{paddingLeft:"4px"},children:(0,n.jsx)(h.JO,{name:"asset"})}),(0,n.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,S.ll)(e.asset.key)}),t&&t>0?(0,n.jsxs)(j.YS,{style:{color:p.$()},children:[(0,T._e)(t)," ",i]}):null]})},(0,S.ll)(e.asset.key))})},onItemSelect:()=>{},children:r})})}let V=y.ZP.div.withConfig({componentId:"sc-9ca8ef04-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),D=(0,y.ZP)(v.rU).withConfig({componentId:"sc-9ca8ef04-3"})(["&:hover{text-decoration:none;}"]);var Y=r(74580);let K=()=>null;var H=r(73407),G=r(49438),Z=r(87171),X=r(39268),ee=r(71348),et=r(89918);let er=e=>{let{refreshState:t,tab:r}=e,{flagSettingsPage:s}=(0,G.gV)(),i=(0,ee.dx)(),d=(0,X.I)(),{enableAssetHealthOverviewPreview:c}=(0,l.useContext)(Z.G);return(0,n.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,n.jsxs)(H.mQ,{selectedTabId:r,children:[(0,n.jsx)(et.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),c&&(0,n.jsx)(et.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),s?null:(0,n.jsx)(et.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),s?null:(0,n.jsx)(et.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),s?null:(0,n.jsx)(et.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===d?(0,n.jsx)(et.f,{id:"amp",title:(0,n.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,n.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,n.jsx)(a.$,{purpose:"body-text"}):(0,n.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?p.L$():p.md()}})]}),to:"/overview/automation"}):null,(0,n.jsx)(et.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,n.jsx)(et.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),t?(0,n.jsx)(o.x,{style:{alignSelf:"center"},children:(0,n.jsx)(b.xi,{refreshState:t})}):null]})},en=e=>{let{tab:t,queryData:r,refreshState:s,...i}=e;return(0,n.jsx)(Y.m,{tabs:(0,n.jsxs)(o.x,{flex:{direction:"column",gap:8},children:[(0,n.jsx)(er,{tab:t,queryData:r,refreshState:s}),(0,n.jsx)(K,{})]}),...i})};var es=r(73466),ei=r(17872),eo=r(30001),el=r(38267);let ea=()=>{(0,N.j)("Overview | Activity");let e=l.useCallback(e=>{let{refreshState:t}=e;return(0,n.jsx)(en,{tab:"activity",refreshState:t})},[]),[t,r]=(0,eo.U)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:a}=l.useContext(Z.G),d=a?"timeline":t,c=l.useCallback(e=>{let{selected:t}=e;return a?null:(d!==t&&r(t),(0,n.jsxs)(i.zH,{children:[(0,n.jsx)(el.Q1,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,n.jsx)(el.Q1,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[d,r,a]);return(0,n.jsx)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,n.jsxs)(s.rs,{children:[!a&&(0,n.jsx)(ei.A,{path:"/overview/activity/assets",children:(0,n.jsx)(P,{Header:e,TabButton:c})}),(0,n.jsx)(ei.A,{path:"/overview/activity/timeline",children:(0,n.jsx)(es.U,{Header:e,TabButton:c})}),(0,n.jsx)(ei.A,{path:"*",isNestingRoute:!0,render:l.useCallback(()=>"timeline"===d?(0,n.jsx)(s.l_,{to:"/overview/activity/timeline"}):(0,n.jsx)(s.l_,{to:"/overview/activity/assets"}),[d])})]})})};var ed=r(63065);let ec=()=>((0,C.Px)(),(0,N.j)("Overview | Jobs"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(Y.m,{title:(0,n.jsx)(j.X6,{children:"Overview"}),tabs:(0,n.jsx)(er,{tab:"jobs"})}),(0,n.jsx)(ed.e,{})]}));var eu=r(73235),eh=r(37483),ex=r(35002),ep=r(22921),eg=r(3922),em=r(98956),ej=r(50646),ef=r(83738),ev=r(22563);let ey=e=>{let{repos:t}=e,r=(0,l.useRef)(null),s=(0,l.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ev.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:a}=(0,ej.N)(ep.y,s),d=(0,l.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,resources:n}=t;e.push({type:"header",repoAddress:r,resourceCount:n.length});let s=(0,ev.Uz)(r);i.includes(s)&&n.forEach(t=>{e.push({type:"resource",repoAddress:r,...t})})}),e},[t,i]),c=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,f.MG)({count:d.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=d[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(z.W2,{ref:r,children:[(0,n.jsx)(eg.f,{}),(0,n.jsx)(z.Nh,{$totalHeight:h,children:p.map(e=>{let{index:t,key:r,size:s,start:l}=e,u=d[t];return"header"===u.type?(0,n.jsx)(ef.vG,{repoAddress:u.repoAddress,height:s,start:l,onToggle:o,onToggleAll:a,expanded:i.includes((0,ev.Uz)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,n.jsx)(ex.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,n.jsx)(x.V,{children:u.resourceCount})})},r):(0,n.jsx)(eg.K,{height:s,start:l,...u},r)})})]})})};var ew=r(907),eb=r(49455),eC=r(20958),ek=r(78491),eE=r(43250),eS=r(71662),eA=r(73658),eT=r(8355);function eL(){let e=(0,eu._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return eL=function(){return e},e}let eO=()=>{(0,C.Px)(),(0,N.j)("Overview | Resources");let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,l.useContext)(eT.C5),[i,c]=(0,I.q)({queryKey:"search",defaults:{search:""}}),u=e.length,h=(0,eC.aM)(eI,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:x,loading:g}=h,m=(0,b.C4)(h,b.dT),j=(0,l.useMemo)(()=>{let e=(0,eb.S)(t),r=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==x?void 0:x.workspaceOrError;return eN((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:r).filter(t=>{let{repoAddress:r}=t;return e.has((0,ev.Uz)(r))})},[s,x,t]),f=!x&&g&&r,v=i.trim().toLocaleLowerCase(),y=v.length>0,w=(0,l.useMemo)(()=>{let e=v.toLocaleLowerCase();return j.map(t=>{let{repoAddress:r,resources:n}=t;return{repoAddress:r,resources:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[j,v]),k=g&&!x;return(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(en,{tab:"resources",refreshState:m}),(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,n.jsx)(eE.C,{}):null,(0,n.jsx)(d.oi,{icon:"search",value:i,rightElement:k?(0,n.jsx)(eA.W,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>c(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),f&&!u?(0,n.jsx)(o.x,{padding:64,children:(0,n.jsx)(a.$,{purpose:"page"})}):(()=>{if(f)return(0,n.jsx)(o.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading resources…"})]})});let r=e.length>t.length;return w.length?(0,n.jsx)(ey,{repos:w}):y?(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No matching resources",description:r?(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in your definitions"]})})}):(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No resources",description:r?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},eN=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,allTopLevelResourceDetails:s}=t,i=(0,_.kQ)(n,e.name);s.length>0&&r.push({repoAddress:i,resources:s})}return(0,ew.S)(r)},eI=(0,eC.Ps)(eL(),ek.B,eS.L);var eM=r(17702),ez=r(87209),e_=r(27028);let eR=e=>{let{repos:t,headerCheckbox:r,checkedKeys:s,onToggleCheckFactory:i}=e,o=l.useRef(null),a=l.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ev.Uz)(t)}),[t]),{expandedKeys:d,onToggle:c,onToggleAll:u}=(0,ej.N)(ep.y,a),h=l.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,schedules:n}=t;e.push({type:"header",repoAddress:r,scheduleCount:n.length});let s=(0,ev.Uz)(r);d.includes(s)&&n.forEach(t=>{e.push({type:"schedule",repoAddress:r,schedule:t})})}),e},[t,d]),p=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),g=(0,f.MG)({count:h.length,getScrollElement:()=>o.current,estimateSize:e=>{let t=h[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),m=g.getTotalSize(),j=g.getVirtualItems();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(z.W2,{ref:o,children:[(0,n.jsx)(e_.og,{checkbox:r}),(0,n.jsx)(z.Nh,{$totalHeight:m,children:j.map(e=>{let{index:t,key:o,size:l,start:a}=e,g=h[t];if("header"===g.type)return(0,n.jsx)(ef.vG,{repoAddress:g.repoAddress,height:l,start:a,onToggle:c,onToggleAll:u,expanded:d.includes((0,ev.Uz)(g.repoAddress)),showLocation:p.has(g.repoAddress.name),rightElement:(0,n.jsx)(ex.u,{content:1===g.scheduleCount?"1 schedule":"".concat(g.scheduleCount," schedules"),placement:"top",children:(0,n.jsx)(x.V,{children:g.scheduleCount})})},o);let m=(0,ez.g)(g.repoAddress,g.schedule.name);return(0,n.jsx)(e_.iT,{name:g.schedule.name,scheduleState:g.schedule.scheduleState,showCheckboxColumn:!!r,checked:s.has(m),onToggleChecked:i(m),repoAddress:g.repoAddress,height:l,start:a},o)})})]})})})};var eP=r(52154),eF=r(40782),e$=r(77044),eU=r(70468),eq=r(74050),eB=r(74302),eQ=r(2389),eW=r(50027),eJ=r(2949);function eV(){let e=(0,eu._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return eV=function(){return e},e}let eD=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,l.useContext)(eT.C5),i=e.length,[c,u]=(0,I.q)({queryKey:"search",defaults:{search:""}}),h=(0,eW.A)(),x=(0,eJ.g)(),g=(0,l.useMemo)(()=>[h,x],[h,x]),{button:m,activeFiltersJsx:j}=(0,eB.m)({filters:g}),f=(0,eC.aM)(eK,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:v,loading:y}=f,w=(0,b.C4)(f,b.dT),C=(0,l.useMemo)(()=>{let e=(0,eb.S)(t),r=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==v?void 0:v.workspaceOrError;return eY((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:r).filter(t=>{let{repoAddress:r}=t;return e.has((0,ev.Uz)(r))})},[v,s,t]),{state:k}=x,E=(0,l.useMemo)(()=>C.map(e=>{let{schedules:t,...r}=e;return{...r,schedules:k.size?t.filter(e=>{let{scheduleState:t}=e;return k.has(t.status)}):t}}),[C,k]),S=c.trim().toLocaleLowerCase(),A=S.length>0,T=(0,l.useMemo)(()=>{let e=S.toLocaleLowerCase();return E.map(t=>{let{repoAddress:r,schedules:n}=t;return{repoAddress:r,schedules:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{schedules:t}=e;return t.length>0})},[E,S]),L=(0,l.useMemo)(()=>T.some(e=>{let{schedules:t}=e;return t.length>0}),[T]),O=(0,l.useMemo)(()=>C.map(e=>{let{repoAddress:t,schedules:r}=e;return r.filter(e=>{let{scheduleState:t}=e;return(0,e$.i)(t)}).map(e=>{let{name:r,scheduleState:n}=e;return{repoAddress:t,scheduleName:r,scheduleState:n}})}).flat(),[C]),N=(0,l.useMemo)(()=>O.map(e=>{let{repoAddress:t,scheduleName:r}=e;return(0,ez.g)(t,r)}),[O]),[{checkedIds:M},{onToggleFactory:z,onToggleAll:_}]=(0,eP.a)(N),R=(0,l.useMemo)(()=>{let e=new Set(T.map(e=>{let{repoAddress:t,schedules:r}=e;return r.map(e=>{let{name:r}=e;return(0,ez.g)(t,r)})}).flat());return N.filter(t=>e.has(t))},[N,T]),P=(0,l.useMemo)(()=>{let e=new Set(R.filter(e=>M.has(e)));return O.filter(t=>{let{repoAddress:r,scheduleName:n}=t;return e.has((0,ez.g)(r,n))})},[R,O,M]),F=N.length>0,$=P.length,U=r&&!i&&y&&!v,q=y&&!v;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(o.x,{flex:{direction:"row",gap:12},children:[m,(0,n.jsx)(d.oi,{icon:"search",value:c,rightElement:q?(0,n.jsx)(eA.W,{tooltipContent:"Loading schedules…"}):void 0,onChange:e=>{u(e.target.value),_(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,n.jsx)(ex.u,{content:"You do not have permission to start or stop these schedules",canShow:L&&!F,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,n.jsx)(eU._,{schedules:P,onDone:()=>w.refetch()})})]}),j.length?(0,n.jsx)(o.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:j}):null,U&&!i?(0,n.jsx)(o.x,{padding:64,children:(0,n.jsx)(a.$,{purpose:"page"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eq.K,{daemonHealth:null==v?void 0:v.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),(()=>{if(U)return(0,n.jsx)(o.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading schedules…"})]})});let r=e.length>t.length;return T.length?(0,n.jsx)(eR,{headerCheckbox:F?(0,n.jsx)(eQ.W,{checkedCount:$,totalCount:R.length,onToggleAll:_}):void 0,repos:T,checkedKeys:M,onToggleCheckFactory:z}):A?(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No matching schedules",description:r?(0,n.jsxs)("div",{children:["No schedules matching ",(0,n.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No schedules matching ",(0,n.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No schedules",description:r?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})})()]})]})},eY=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,schedules:s}=t,i=(0,_.kQ)(n,e.name),o=s.map(e=>{let{name:t,scheduleState:r}=e;return{name:t,scheduleState:r}});o.length>0&&r.push({repoAddress:i,schedules:o})}return(0,ew.S)(r)},eK=(0,eC.Ps)(eV(),eM.i,ek.B,eF.O),eH=()=>((0,C.Px)(),(0,N.j)("Overview | Schedules"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(en,{tab:"schedules"}),(0,n.jsx)(eD,{})]}));var eG=r(40389),eZ=r(53029);let eX=e=>{let{repos:t,headerCheckbox:r,checkedKeys:s,onToggleCheckFactory:i}=e,o=l.useRef(null),a=l.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ev.Uz)(t)}),[t]),{expandedKeys:d,onToggle:c,onToggleAll:u}=(0,ej.N)(ep.y,a),h=l.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,sensors:n}=t;e.push({type:"header",repoAddress:r,sensorCount:n.length});let s=(0,ev.Uz)(r);d.includes(s)&&n.forEach(t=>{e.push({type:"sensor",repoAddress:r,sensor:t})})}),e},[t,d]),p=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),g=(0,f.MG)({count:h.length,getScrollElement:()=>o.current,estimateSize:e=>{let t=h[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),m=g.getTotalSize(),j=g.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(z.W2,{ref:o,children:[(0,n.jsx)(eZ.KF,{checkbox:r}),(0,n.jsx)(z.Nh,{$totalHeight:m,children:j.map(e=>{let{index:t,key:o,size:l,start:a}=e,g=h[t];if("header"===g.type)return(0,n.jsx)(ef.vG,{repoAddress:g.repoAddress,height:l,start:a,onToggle:c,onToggleAll:u,expanded:d.includes((0,ev.Uz)(g.repoAddress)),showLocation:p.has(g.repoAddress.name),rightElement:(0,n.jsx)(ex.u,{content:1===g.sensorCount?"1 sensor":"".concat(g.sensorCount," sensors"),placement:"top",children:(0,n.jsx)(x.V,{children:g.sensorCount})})},o);let m=(0,eG.x)(g.repoAddress,g.sensor.name);return(0,n.jsx)(eZ.Rx,{name:g.sensor.name,sensorState:g.sensor.sensorState,showCheckboxColumn:!!r,checked:s.has(m),onToggleChecked:i(m),repoAddress:g.repoAddress,height:l,start:a},o)})})]})})};var e0=r(88257),e1=r(64265),e2=r(5409),e4=r(81602);function e3(){let e=(0,eu._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return e3=function(){return e},e}function e5(e){let t=eZ.W_[e].name;return{label:t,value:{type:e,label:t},match:[t]}}let e6={[e0.dEY.ASSET]:e5(e0.dEY.ASSET),[e0.dEY.AUTO_MATERIALIZE]:e5(e0.dEY.AUTO_MATERIALIZE),[e0.dEY.AUTOMATION]:e5(e0.dEY.AUTOMATION),[e0.dEY.FRESHNESS_POLICY]:e5(e0.dEY.FRESHNESS_POLICY),[e0.dEY.MULTI_ASSET]:e5(e0.dEY.MULTI_ASSET),[e0.dEY.RUN_STATUS]:e5(e0.dEY.RUN_STATUS),[e0.dEY.STANDARD]:e5(e0.dEY.STANDARD)},e8=Object.values(e6),e7=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,l.useContext)(eT.C5),[i,c]=(0,I.q)({queryKey:"search",defaults:{search:""}}),[u,h]=(0,I.q)({encode:e=>({sensorType:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.sensorType)||void 0===t?void 0:t.split(","))||[])}}),x=(0,eW.A)(),g=(0,eJ.g)(),m=(0,e4.im)({name:"Sensor type",allValues:e8,icon:"sensors",getStringValue:e=>e.label,state:(0,l.useMemo)(()=>new Set(Array.from(u).map(e=>e6[e].value)),[u]),renderLabel:e=>{let{value:t}=e;return(0,n.jsx)("span",{children:t.label})},onStateChanged:e=>{h(new Set(Array.from(e).map(e=>e.type)))}}),j=(0,l.useMemo)(()=>[x,g,m],[x,g,m]),{button:f,activeFiltersJsx:v}=(0,eB.m)({filters:j}),y=(0,eC.aM)(te,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:w,loading:C}=y,k=(0,b.C4)(y,b.dT),E=(0,l.useMemo)(()=>{let e=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),r=null==w?void 0:w.workspaceOrError,n=(null==r?void 0:r.__typename)==="Workspace"?r.locationEntries:e,i=(0,eb.S)(t);return e9(n).filter(e=>{let{repoAddress:t}=e;return i.has((0,ev.Uz)(t))})},[w,s,t]),{state:S}=g,A=(0,l.useMemo)(()=>E.map(e=>{let{sensors:t,...r}=e;return{...r,sensors:t.filter(e=>{let{sensorState:t,sensorType:r}=e;return(!S.size||!!S.has(t.status))&&(!u.size||!!u.has(r))})}}),[E,S,u]),T=i.trim().toLocaleLowerCase(),L=T.length>0,O=(0,l.useMemo)(()=>{let e=T.toLocaleLowerCase();return A.map(t=>{let{repoAddress:r,sensors:n}=t;return{repoAddress:r,sensors:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{sensors:t}=e;return t.length>0})},[A,T]),N=(0,l.useMemo)(()=>O.some(e=>{let{sensors:t}=e;return t.length>0}),[O]),M=(0,l.useMemo)(()=>E.map(e=>{let{repoAddress:t,sensors:r}=e;return r.filter(e=>{let{sensorState:t}=e;return(0,e$.i)(t)}).map(e=>{let{name:r,sensorState:n}=e;return{repoAddress:t,sensorName:r,sensorState:n}})}).flat(),[E]),z=(0,l.useMemo)(()=>M.map(e=>{let{repoAddress:t,sensorName:r}=e;return(0,eG.x)(t,r)}),[M]),[{checkedIds:_},{onToggleFactory:R,onToggleAll:P}]=(0,eP.a)(z),F=(0,l.useMemo)(()=>{let e=new Set(O.map(e=>{let{repoAddress:t,sensors:r}=e;return r.map(e=>{let{name:r}=e;return(0,eG.x)(t,r)})}).flat());return z.filter(t=>e.has(t))},[z,O]),$=(0,l.useMemo)(()=>{let e=new Set(F.filter(e=>_.has(e)));return M.filter(t=>{let{repoAddress:r,sensorName:n}=t;return e.has((0,eG.x)(r,n))})},[F,M,_]),U=z.length>0,q=$.length,B=r&&C&&!w,Q=C&&!w;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,n.jsxs)(o.x,{flex:{direction:"row",gap:12},children:[f,(0,n.jsx)(d.oi,{icon:"search",value:i,rightElement:Q?(0,n.jsx)(eA.W,{tooltipContent:"Loading sensors…"}):void 0,onChange:e=>c(e.target.value),placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,n.jsxs)(o.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,n.jsx)(b.xi,{refreshState:k}),(0,n.jsx)(ex.u,{content:"You do not have permission to start or stop these schedules",canShow:N&&!U,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,n.jsx)(e1.b,{sensors:$,onDone:()=>k.refetch()})})]})]}),v.length?(0,n.jsx)(o.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:v}):null,B?(0,n.jsx)(o.x,{padding:64,children:(0,n.jsx)(a.$,{purpose:"page"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e2.F,{daemonHealth:null==w?void 0:w.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),(()=>{if(B)return(0,n.jsx)(o.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading sensors…"})]})});let r=e.length>t.length;return O.length?(0,n.jsx)(eX,{headerCheckbox:U?(0,n.jsx)(eQ.W,{checkedCount:q,totalCount:F.length,onToggleAll:P}):void 0,repos:O,checkedKeys:_,onToggleCheckFactory:R}):L?(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No matching sensors",description:r?(0,n.jsxs)("div",{children:["No sensors matching ",(0,n.jsx)("strong",{children:i})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No sensors matching ",(0,n.jsx)("strong",{children:i})," were found in your definitions"]})})}):(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eh.t,{icon:"search",title:"No sensors",description:r?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})})()]})]})},e9=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,sensors:s}=t,i=(0,_.kQ)(n,e.name);s.length>0&&r.push({repoAddress:i,sensors:s})}return(0,ew.S)(r)},te=(0,eC.Ps)(e3(),eM.i,ek.B,eF.O),tt=()=>((0,C.Px)(),(0,N.j)("Overview | Sensors"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(en,{tab:"sensors"}),(0,n.jsx)(e7,{})]}));var tr=r(49308),tn=r(1747),ts=r(37504),ti=r(93812),to=r(76575),tl=r(28363),ta=r(87803),td=r(4733),tc=r(15332);let tu=e=>{var t,r;let{setSelectedTick:s,setTableView:i,setTimerange:o,setParentStatuses:a}=e,[d,c]=(0,I.q)({queryKey:"status",defaults:{status:td.tn.ALL}}),u=(0,l.useMemo)(()=>td.KI[d]||td.KI[td.tn.ALL],[d]),{queryResult:h,paginationProps:x}=(0,tc.l)({query:ti.X,variables:{statuses:(0,l.useMemo)(()=>Array.from(u),[u])},nextCursorForResult:e=>{var t;let r=e.autoMaterializeTicks;if(r.length)return null===(t=r[14])||void 0===t?void 0:t.id},getResultArray:e=>(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[],pageSize:15});return(0,b.C4)(h,1e4,!x.hasPrevCursor),(0,l.useEffect)(()=>{if(x.hasPrevCursor){var e,t,r;let n=null===(e=h.data)||void 0===e?void 0:e.autoMaterializeTicks;if(n&&n.length){let e=null===(t=n[n.length-1])||void 0===t?void 0:t.timestamp,s=null===(r=n[0])||void 0===r?void 0:r.endTimestamp;e&&s&&o([e,s])}}else o(void 0)},[x.hasPrevCursor,null===(t=h.data)||void 0===t?void 0:t.autoMaterializeTicks,o]),(0,l.useEffect)(()=>{x.hasPrevCursor?a(Array.from(u)):a(void 0)},[x.hasPrevCursor,a,u]),(0,n.jsx)(td.Vd,{loading:h.loading,ticks:(null===(r=h.data)||void 0===r?void 0:r.autoMaterializeTicks)||[],paginationProps:x,setSelectedTick:s,setTableView:i,tickStatus:d,setTickStatus:c})};var th=r(56130),tx=r(36803),tp=r(59502),tg=r(57758);let tm=()=>{var e;let t=(0,ee.dx)(),r=(0,th.p)(),{permissions:{canToggleAutoMaterialize:s}={}}=(0,tx.WB)(),[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(void 0),[h,x]=(0,l.useState)(void 0),g=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return h||c?{afterTimestamp:null==h?void 0:h[0],beforeTimestamp:null==h?void 0:h[1],statuses:c}:{afterTimestamp:(e-12e5)/1e3}},[c,h]),[m,f]=(0,eC.td)(ti.X),v=(0,l.useCallback)(async()=>await m({variables:g()}),[m,g]);(0,b.bT)({refresh:v,enabled:!i&&!h&&!c,intervalMs:2e3,leading:!0});let[y,w]=(0,l.useState)(null),[C,k]=(0,I.q)((0,l.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),E=null!==(e=f.data)&&void 0!==e?e:f.previousData,S=(0,l.useMemo)(()=>(null==E?void 0:E.autoMaterializeTicks)||[],[E]),A=(0,l.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.map((e,t)=>{let r=S[t-1];if(r&&(0,tg.g6)(e,t)){let t={...e};return t.endTimestamp=r.timestamp,t.status=e0.izS.FAILURE,t}return e}))&&void 0!==e?e:[]},[JSON.stringify(S.map(e=>"".concat(e.id,":").concat(e.status)))]),T=(0,l.useCallback)(e=>{d(!!e)},[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.x,{padding:{vertical:12,horizontal:24},children:(0,n.jsx)(ta.q,{})}),(0,n.jsx)(tn.i,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Running"}),(0,n.jsx)("td",{children:t.loading?(0,n.jsx)(a.$,{purpose:"body-text"}):(0,n.jsx)(ts.X,{format:"switch",checked:!t.paused,disabled:!s,onChange:async e=>{let n=e.target.checked;n||await r({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."}),t.setPaused(!n)}})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Evaluation frequency"}),(0,n.jsx)("td",{children:"~30s"})]})]})}),(0,n.jsx)(o.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,n.jsx)(j.Tj,{children:"Evaluation timeline"})}),E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tp.p,{ticks:A,onHoverTick:T,onSelectTick:w,exactRange:h,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,n.jsx)(to.d,{tick:y,isOpen:!!y,close:()=>{w(null)}}),"evaluations"===C?(0,n.jsx)(tu,{setSelectedTick:w,setTableView:k,setParentStatuses:u,setTimerange:x}):(0,n.jsx)(tl.o,{setTableView:k})]}):(0,n.jsxs)(o.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading evaluations…"})]})]})};var tj=r(71406);let tf=()=>{let e=(0,X.I)(),{flagSettingsPage:t}=(0,G.gV)();switch(e){case"unknown":return(0,n.jsx)("div",{});case"has-global-amp":return(0,n.jsx)(tv,{});case"has-sensor-amp":return(0,n.jsx)(s.l_,{to:t?"/automation":"/overview/sensors"});default:(0,tj.UT)(e)}},tv=()=>((0,C.Px)(),(0,N.j)("Overview | Auto-materialize"),(0,n.jsxs)(tr.T,{children:[(0,n.jsx)(en,{tab:"amp"}),(0,n.jsx)(tm,{})]}));var ty=r(80122),tw=r(90731),tb=r(54048);function tC(){let e=(0,eu._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return tC=function(){return e},e}let tk=e=>{switch(e){case e0.Jv3.CANCELED:return"Canceled";case e0.Jv3.CANCELING:return"Canceling";case e0.Jv3.COMPLETED:return"Completed";case e0.Jv3.FAILED:return"Failed";case e0.Jv3.REQUESTED:return"In progress";case e0.Jv3.COMPLETED_SUCCESS:return"Success";case e0.Jv3.COMPLETED_FAILED:return"Failed"}},tE=Object.keys(e0.Jv3).map(e=>{let t=tk(e);return{label:t,value:e,match:[e,t]}}),tS=()=>{(0,C.Px)(),(0,N.j)("Overview | Backfills");let[e,t]=(0,I.q)({encode:e=>({status:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.status)||void 0===t?void 0:t.split(","))||[])}}),r=(0,e4.im)({name:"Status",icon:"status",allValues:tE,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:e=>{let{value:t}=e;return(0,n.jsx)("div",{children:tk(t)})},getStringValue:e=>tk(e),state:e,onStateChanged:t}),{button:s,activeFiltersJsx:i}=(0,eB.m)({filters:[r]}),{queryResult:l,paginationProps:d}=(0,tc.l)({query:tA,variables:{status:e.size>0?Array.from(e)[0]:void 0},pageSize:10,nextCursorForResult:e=>{var t;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(t=e.partitionBackfillsOrError.results[9])||void 0===t?void 0:t.id:void 0},getResultArray:e=>(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}),c=(0,tb.$$)(),u=(0,b.C4)(l,b.dT),{loading:h,data:x}=l;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.x,{padding:{vertical:12,horizontal:20},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(o.x,{flex:{direction:"column",gap:8},children:[(0,n.jsx)("div",{children:s}),i]}),(0,n.jsx)(b.xi,{refreshState:u})]}),(()=>{if(h&&!x)return(0,n.jsx)(o.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading backfills…"})]})});let t=null==x?void 0:x.partitionBackfillsOrError;return(null==t?void 0:t.__typename)==="PythonError"?(0,n.jsx)(w.T9,{error:t}):t&&(null==t?void 0:t.results.length)?(0,n.jsxs)("div",{children:[c?null:(0,n.jsx)(o.x,{padding:{horizontal:24,bottom:16},children:(0,n.jsx)(tb.So,{})}),(0,n.jsx)(tw.GQ,{backfills:t.results.slice(0,10),refetch:l.refetch}),t.results.length>0?(0,n.jsx)(o.x,{margin:{top:16},children:(0,n.jsx)(ty.b$,{...d})}):null]}):e.size>0?(0,n.jsx)(o.x,{padding:{vertical:64},children:(0,n.jsx)(eh.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,n.jsx)(o.x,{padding:{vertical:64},children:(0,n.jsx)(eh.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})})})()]})},tA=(0,eC.Ps)(tC(),ek.B,tw.be),tT=()=>((0,C.Px)(),(0,N.j)("Overview | Backfills"),(0,n.jsxs)(tr.T,{children:[(0,n.jsx)(en,{tab:"backfills"}),(0,n.jsx)(tS,{})]}));var tL=r(84927),tO=r(3295),tN=r(74905),tI=r(33878),tM=r(23449),tz=r(7152),t_=r(32093),tR=r(77851);let tP=()=>{let{featureContext:e}=(0,l.useContext)(t_.U),{backfillId:t}=(0,s.UO)();(0,C.Px)(),(0,N.j)("Backfill | ".concat(t));let[r,i]=(0,I.q)({queryKey:"tab",defaults:{tab:"partitions"}}),d=(0,tz.ul)(t),u=(0,tb.$$)(),{data:h,error:x}=d,g=(null==h?void 0:h.partitionBackfillOrError.__typename)==="PartitionBackfill"?h.partitionBackfillOrError:null,m=!g||[e0.Jv3.REQUESTED,e0.Jv3.CANCELING].includes(g.status),f=(0,b.C4)(d,1e4,m);return(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(Y.m,{title:(0,n.jsxs)(j.X6,{children:[(0,n.jsx)(v.rU,{to:"/overview/backfills",style:{color:p.$()},children:"Backfills"})," / ",t]}),right:(0,n.jsxs)(o.x,{flex:{gap:12,alignItems:"center"},children:[m?(0,n.jsx)(b.xi,{refreshState:f}):null,g?(0,n.jsx)(tL.WH,{backfill:g,refetch:d.refetch,canCancelRuns:g.status===e0.Jv3.REQUESTED}):null]})}),function(){if(!h||!h.partitionBackfillOrError)return(0,n.jsx)(o.x,{padding:64,"data-testid":(0,tR.N)("page-loading-indicator"),children:(0,n.jsx)(a.$,{purpose:"page"})});if("PythonError"===h.partitionBackfillOrError.__typename)return(0,n.jsx)(w.T9,{error:h.partitionBackfillOrError});if("BackfillNotFoundError"===h.partitionBackfillOrError.__typename)return(0,n.jsx)(eh.t,{icon:"no-results",title:h.partitionBackfillOrError.message});let t=h.partitionBackfillOrError;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tI.q,{backfill:t}),u?null:(0,n.jsx)(o.x,{padding:{horizontal:24,bottom:16},children:(0,n.jsx)(tb.So,{})}),(0,n.jsx)(o.x,{padding:{left:24},border:"bottom",children:(0,n.jsxs)(H.mQ,{size:"large",selectedTabId:r,children:[(0,n.jsx)(H.OK,{id:"partitions",title:"Partitions",onClick:()=>i("partitions")}),(0,n.jsx)(H.OK,{id:"runs",title:"Runs",onClick:()=>i("runs")}),e.canSeeBackfillCoordinatorLogs?(0,n.jsx)(H.OK,{id:"logs",title:"Coordinator logs",onClick:()=>i("logs")}):null]})}),(null==x?void 0:x.graphQLErrors)&&(0,n.jsx)(c.b,{intent:"error",title:x.graphQLErrors.map(e=>e.message)}),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{flex:1,position:"relative",minHeight:0},children:["partitions"===r&&(0,n.jsx)(tO.Sl,{backfill:t}),"runs"===r&&(0,n.jsx)(tM.t,{backfill:t,view:"both"}),"logs"===r&&(0,n.jsx)(tN.o,{backfill:t})]})]})}()]})},tF=()=>{let{flagSettingsPage:e}=(0,G.gV)(),t=(0,X.I)();return(0,n.jsxs)(s.rs,{children:[(0,n.jsx)(ei.A,{path:"/overview/activity",isNestingRoute:!0,children:(0,n.jsx)(ea,{})}),(0,n.jsx)(ei.A,{path:"/overview/jobs",render:()=>e?(0,n.jsx)(s.l_,{to:"/jobs"}):(0,n.jsx)(ec,{})}),(0,n.jsx)(ei.A,{path:"/overview/schedules",render:()=>e?(0,n.jsx)(s.l_,{to:"/automation"}):(0,n.jsx)(eH,{})}),(0,n.jsx)(ei.A,{path:"/overview/sensors",render:()=>e?(0,n.jsx)(s.l_,{to:"/automation"}):(0,n.jsx)(tt,{})}),(0,n.jsx)(ei.A,{path:"/overview/automation",render:()=>e&&"has-global-amp"!==t?(0,n.jsx)(s.l_,{to:"/automation"}):(0,n.jsx)(tf,{})}),(0,n.jsx)(ei.A,{path:"/overview/backfills/:backfillId",render:()=>(0,n.jsx)(tP,{})}),(0,n.jsx)(ei.A,{path:"/overview/backfills",exact:!0,render:()=>(0,n.jsx)(tT,{})}),(0,n.jsx)(ei.A,{path:"/overview/resources",children:(0,n.jsx)(eO,{})}),(0,n.jsx)(ei.A,{path:"*",isNestingRoute:!0,render:()=>(0,n.jsx)(s.l_,{to:"/overview/activity"})})]})};var t$=tF},907:function(e,t,r){r.d(t,{S:function(){return s}});var n=r(22563);let s=e=>[...e].sort((e,t)=>{let r=(0,n.Uz)(e.repoAddress),s=(0,n.Uz)(t.repoAddress);return r.localeCompare(s)})},49455:function(e,t,r){r.d(t,{S:function(){return i}});var n=r(65822),s=r(22563);let i=e=>new Set(e.map(e=>(0,s.Uz)((0,n.kQ)(e.repository.name,e.repositoryLocation.name))))},38267:function(e,t,r){r.d(t,{Q1:function(){return y},Qf:function(){return w},zc:function(){return v}});var n=r(73235),s=r(52322),i=r(38491),o=r(39013),l=r(18149),a=r.n(l),d=r(2784),c=r(7267),u=r(35505),h=r(59351),x=r(52338),p=r(20958),g=r(20171),m=r(88610);function j(){let e=(0,n._)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]);return j=function(){return e},e}let f=e=>{switch(e){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,p.aM)(b,{variables:{queuedFilter:{...e,statuses:Array.from(h.sy)},inProgressFilter:{...e,statuses:Array.from(h.Ys)}}}),{data:r}=t,{queuedCount:n,inProgressCount:o}=(0,d.useMemo)(()=>{var e,t;return{queuedCount:(null==r?void 0:null===(e=r.queuedCount)||void 0===e?void 0:e.__typename)==="Runs"?r.queuedCount.count:null,inProgressCount:(null==r?void 0:null===(t=r.inProgressCount)||void 0===t?void 0:t.__typename)==="Runs"?r.inProgressCount.count:null}},[r]),[l]=(0,x.oD)(),a=w(l);(0,g.j)(f(a));let c=e=>{let t=l.filter(e=>"status"!==e.token),r=e.map(e=>({token:"status",value:e}));return(0,x.it)([...r,...t])};return{tabs:(0,s.jsxs)(i.zH,{children:[(0,s.jsx)(y,{to:c([]),id:"all",$active:"all"===a,children:"All runs"}),(0,s.jsxs)(y,{to:c(Array.from(h.sy)),id:"queued",$active:"queued"===a,children:["Queued (",null!=n?n:"indeterminate",")"]}),(0,s.jsxs)(y,{to:c(Array.from(h.Ys)),id:"in-progress",$active:"in-progress"===a,children:["In progress (",null!=o?o:"indeterminate",")"]}),(0,s.jsx)(y,{to:c(Array.from(h.hd)),id:"failed",$active:"failed"===a,children:"Failed"}),(0,s.jsx)(y,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===a,children:"Scheduled"})]}),queryResult:t}},y=(0,u.ZP)(m.A).withConfig({componentId:"sc-56e7dbb1-0"})(["color:",";&&:hover{color:",";}",""],o.$(),o.$(),e=>{let{$active:t}=e;return t?(0,u.iv)(["background-color:",";color:",";&&:hover{background-color:",";color:",";}"],o.AU(),o.Ep(),o.AU(),o.Ep()):(0,u.iv)(["background-color:",";"],o.v8())}),w=e=>{let{pathname:t}=(0,c.TH)();if("/runs/timeline"===t)return"timeline";if("/runs/scheduled"===t)return"scheduled";if("/overview/backfills"===t)return"backfills";let r=new Set(e.filter(e=>"status"===e.token).map(e=>e.value));return a()(h.sy,r)?"queued":a()(h.Ys,r)?"in-progress":a()(h.hd,r)?"failed":"all"},b=(0,p.Ps)(j())}}]);
//# sourceMappingURL=5654.eb82841d300ce3a6.js.map